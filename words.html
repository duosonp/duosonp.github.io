<!DOCTYPE html>
<html>
<title>Words</title>
<meta charset="utf-8">

<body>
    <style>
        div {
            border: 1px solid black;
        }
    </style>
    <div>
        <label for="key">KEY</label>
        <input id="key" name="key" />
    </div>
    <div>
        <label for="words">WORDS</label>
        <textarea id="words" width="100%" height="100%">word</textarea>
    </div>
    <div>
        <label for="get">GET</label>
        <input type="button" id="get" name="Get" value="Get"></input>
    </div>
    <div>
        <label for="jsontextarea">RESPONS</label>
        <textarea id="jsontextarea" width="100%" height="100%">nothing</textarea>
    </div>
    <script>
        function get() {
            const key = document.getElementById("key").value;
            const words = document.getElementById("words").innerText;
            const jta = document.getElementById("jsontextarea");

            window.alert(`Get words ${words} using key ${key} ...`);
            window.alert(`... jsontextarea ${jta.innerHTML}`);
            jta.innerHTML = "Getting...";
            window.alert("Abort to get...")
            for (let word of words.split(/\s+/)) {
                const url = `https://api.forvo.com/key/${key}/actions/word-pronunciation/format/json/word/${word}`;
                window.alert("Fetch " + url);
                fetch(url)
                    .then((response) => {
                        if (!response.ok) {
                            throw new Error(`HTTP error! Status: ${response.status}`);
                        }
                        window.alert("got response");
                        return response.json();
                    })
                    .then((response) => {
                        window.alert(response);
                        ta.innerHTML = `${response}`;
                    })
                    .catch((err) => {
                        window.alert(err);
                    })
            }
        }
        window.alert("Call get on button click");
        try {
            document.getElementById("get").onclick = ev => get();
            window.alert("Ready");
        } catch (err) {
            window.alert(err);
        }
    </script>
</body>

</html>